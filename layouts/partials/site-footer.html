<footer class="site-footer{{ if eq .Type "location" }} location-footer{{ end }}">
  {{ if ne .Type "location" }}
  {{ partial "newsletter.html" . }}
  {{ end }}

  {{ with .Site.Params.city_tagline }}
    {{ $city := . }}
    {{ $label := "Made with ❤️ in" }}
    {{ $location := "" }}
    {{ $url := "" }}
    {{ $cityType := printf "%T" $city }}

    {{ if hasPrefix $cityType "map" }}
      {{ with index $city "text" }}{{ $label = . }}{{ end }}
      {{ with index $city "location" }}{{ $location = . }}{{ end }}
      {{ with index $city "url" }}{{ $url = . }}{{ end }}
    {{ else }}
      {{ $location = $city }}
    {{ end }}

    {{ if $location }}
      {{ $href := "" }}
      {{ if $url }}
        {{ $href = $url }}
        {{ if not (or (hasPrefix $url "http://") (hasPrefix $url "https://")) }}
          {{ $href = $url | relURL }}
        {{ end }}
      {{ end }}
      <p class="city-note">
        {{ $label }}
        {{ if $href }}
          <a href="{{ $href }}">{{ $location }}</a>
        {{ else }}
          {{ $location }}
        {{ end }}
      </p>
    {{ end }}
  {{ end }}
  {{ with .Site.Params.description }}
  {{ end }}

  <div class="footer-links">
    {{ with .Site.Params.colophonURL }}
    <a href="{{ . | relURL }}">Colophon</a>
    {{ end }}
    <a href="{{ (.Site.Params.rssURL | default "feed.json") | relURL }}">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M4 11a9 9 0 0 1 9 9"></path>
        <path d="M4 4a16 16 0 0 1 16 16"></path>
        <circle cx="5" cy="19" r="1"></circle>
      </svg>
      RSS
    </a>
  </div>

  {{ if ne .Type "location" }}
  {{- $author := or .Site.Params.author_name .Site.Title -}}
  <p class="copyright">© {{ now.Format "2006" }} {{ $author }}</p>
  {{ end }}
<script defer src="https://cloud.umami.is/script.js" data-website-id="930a6285-9a8e-4eba-9a4a-c7ec8938149b"></script>
</footer>
